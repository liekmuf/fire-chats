(this.webpackJsonpchat=this.webpackJsonpchat||[]).push([[0],{16:function(e,t,a){e.exports={auth:"Auth_auth__1Eyzu",title:"Auth_title__3IYG7",card:"Auth_card__8PbP7",form:"Auth_form__YyYoq",input:"Auth_input__2ysYl",caption:"Auth_caption__5u4xm",link:"Auth_link__1xODJ",error:"Auth_error__v8JgQ"}},23:function(e,t,a){e.exports={message:"ChatMessage_message__2rAj-",avatar:"ChatMessage_avatar__2eKE-",wrapper:"ChatMessage_wrapper__1zNCa",info:"ChatMessage_info__3eBV0",text:"ChatMessage_text__yRdl0",time:"ChatMessage_time__35Mhk",username:"ChatMessage_username__32eA0",recieved:"ChatMessage_recieved__3253a"}},24:function(e,t,a){e.exports={profile:"Profile_profile__7qHEO",container:"Profile_container__pxATV",form__wrapper:"Profile_form__wrapper__37bwB",wrapper:"Profile_wrapper__1iYV8",avatar:"Profile_avatar__1Lkid",name:"Profile_name__37ox4",email:"Profile_email__3WHI6",signout:"Profile_signout__2HT7w",newchat:"Profile_newchat__1FkVV"}},32:function(e,t,a){e.exports={burger:"Burger_burger__1GVy9",line:"Burger_line__1euoh",second:"Burger_second__3r08P",third:"Burger_third__2LXET"}},37:function(e,t,a){e.exports={sidebar:"Sidebar_sidebar__2sRcu",hiden:"Sidebar_hiden__3ZNIE",mobile:"Sidebar_mobile__KyWRd",wrapper:"Sidebar_wrapper__1YqYQ"}},43:function(e,t,a){e.exports={chatroom:"\u0421hatroom_chatroom__7aLdj",hiden:"\u0421hatroom_hiden__3RIye",selectchat:"\u0421hatroom_selectchat__1Ecfd"}},44:function(e,t,a){e.exports={arrow:"Arrow_arrow__1Ewgq",arrowhead:"Arrow_arrowhead__2hm6-",line:"Arrow_line__24Ah2"}},45:function(e,t,a){e.exports={form:"SendForm_form__2ByJy",input:"SendForm_input__3H-uF",ico:"SendForm_ico__1Hk9B"}},46:function(e,t,a){e.exports={down:"ScrollDown_down__3cI5v",arrow:"ScrollDown_arrow__2n93j",hiden:"ScrollDown_hiden__2pujp"}},47:function(e,t,a){e.exports={container:"ChatsList_container__3CgYI"}},50:function(e,t,a){e.exports={header:"ChatroomHeader_header__3ZVbl",header__logo:"ChatroomHeader_header__logo__30AuT"}},51:function(e,t,a){e.exports={chat:"ChatListItem_chat__1wofH",active:"ChatListItem_active__1ciE1"}},54:function(e,t,a){e.exports={container:"MessagesContainer_container__RSGkw"}},55:function(e,t,a){e.exports={input:"Search_input__2bZyK"}},61:function(e,t,a){},67:function(e,t,a){"use strict";a.r(t);var n=a(13),c=a.n(n),r=a(52),s=a.n(r),i=a(14),o=(a(61),a(26)),l=(a(63),a(68),a(53)),u=a(43),d=a.n(u),j=a(23),h=a.n(j),b=a(7),m=function(e){var t=e.text,a=e.photoUrl,n=e.userName,c=e.createdAt;return Object(b.jsxs)("div",{className:"".concat(h.a.message," ").concat(h.a.recieved),children:[Object(b.jsx)("img",{className:h.a.avatar,src:a,alt:""}),Object(b.jsxs)("span",{className:h.a.wrapper,children:[Object(b.jsx)("div",{className:h.a.username,children:n}),Object(b.jsxs)("div",{className:h.a.info,children:[Object(b.jsx)("span",{className:h.a.text,children:t}),Object(b.jsx)("div",{className:h.a.time,children:c})]})]})]})},O=function(e){var t=e.text,a=e.createdAt;return Object(b.jsx)("div",{className:h.a.message,children:Object(b.jsx)("span",{className:h.a.wrapper,children:Object(b.jsxs)("div",{className:h.a.info,children:[Object(b.jsx)("span",{className:h.a.text,children:t}),Object(b.jsx)("div",{className:h.a.time,children:a})]})})})},p=a(54),_=a.n(p),x=function(e){return new Date(1e3*(null===e||void 0===e?void 0:e.seconds))},f=function(e){var t=e.getHours(),a="0".concat(e.getMinutes()).slice(-2);return isNaN(e)?"":"".concat(t,":").concat(a)},v=function(e){var t=e.messages,a=e.uid;return Object(b.jsx)("div",{className:_.a.container,children:t&&t.map((function(e){return a===e.uid?Object(b.jsx)(O,{text:e.text,createdAt:f(x(e.createdAt))},e.id):Object(b.jsx)(m,{userName:e.userName,photoUrl:e.photoURL,isSend:a===e.uid,text:e.text,createdAt:f(x(e.createdAt))},e.id)}))})},g=c.a.memo(v),N=a(27),C=a(44),w=a.n(C),S=function(e){return Object(b.jsxs)("div",Object(N.a)(Object(N.a)({className:w.a.arrow},e),{},{children:[Object(b.jsx)("div",{className:w.a.arrowhead}),Object(b.jsx)("div",{className:w.a.line})]}))},y=a(50),E=a.n(y),k=function(e){var t=e.chatName,a=e.showSidebar,n=e.isMobile;return Object(b.jsxs)("header",{className:E.a.header,children:[n&&Object(b.jsx)(S,{onClick:a}),Object(b.jsx)("h1",{className:E.a.header__logo,children:t})]})},A=a.p+"static/media/sendicon.12607619.svg",L=a(45),B=a.n(L),P=function(e){var t=e.send,a=Object(n.useState)(""),c=Object(i.a)(a,2),r=c[0],s=c[1],o=function(e){e.preventDefault(),r.length>0&&(t(r),s(""))};return Object(b.jsxs)("form",{onSubmit:o,className:B.a.form,children:[Object(b.jsx)("input",{className:B.a.input,value:r,placeholder:"Write a message...",onChange:function(e){return s(e.target.value)}}),Object(b.jsx)("img",{src:A,className:B.a.ico,onClick:o,alt:""})]})},D=a(46),M=a.n(D),H=function(e){var t=e.scroll,a=Object(n.useState)(!0),c=Object(i.a)(a,2),r=c[0],s=c[1],o="".concat(M.a.down," ").concat(r?M.a.hiden:""),l=function(e){var t=e.target.documentElement.scrollHeight-(e.target.documentElement.scrollTop+window.innerHeight);t<15||window.innerHeight-e.target.documentElement.scrollHeight>50?s(!0):t>30&&s(!1)};return Object(n.useEffect)((function(){return document.addEventListener("scroll",l),function(){return document.body.removeEventListener("scroll",l)}}),[]),Object(b.jsx)("div",{onClick:t,className:o,children:Object(b.jsx)("div",{className:M.a.arrow})})},I=a(0),V=a.n(I),R=a(2),U=a(28);o.a.initializeApp({apiKey:"AIzaSyDmBs0cz6WmjRPDki01xlR3EpgypxHmjkU",authDomain:"danylo-chat.firebaseapp.com",projectId:"danylo-chat",storageBucket:"danylo-chat.appspot.com",messagingSenderId:"608034901555",appId:"1:608034901555:web:467a24e789b220b37edd46"});var F=o.a.auth(),T=function(){var e=Object(R.a)(V.a.mark((function e(t,a){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(U.d)(F,t,a);case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Y=function(){var e=Object(R.a)(V.a.mark((function e(t,a,n){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(U.a)(F,t,a).then((function(){Object(U.e)(F.currentUser,{displayName:n,photoURL:"https://cdn.pixabay.com/photo/2016/08/08/09/17/avatar-1577909_960_720.png"})}));case 2:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),z=function(){var e=new o.a.auth.GoogleAuthProvider;F.signInWithPopup(e)},W=function(){F.signOut()},G=function(){var e=F.currentUser;return{uid:e.uid,photoURL:e.photoURL,email:e.email,displayName:e.displayName}},J=c.a.createContext(),q=a(56),K=o.a.firestore(),Z=function(e,t){var a=K.collection(e).orderBy(t),n=Object(q.a)(a,{idField:"id"});return Object(i.a)(n,1)[0]},Q=function(e){var t=e.currentChat,a=e.showSidebar,c=e.isSidebarHiden,r=Object(n.useContext)(J),s=Object(n.useRef)(),i=Z("chats/".concat(t.id,"/messages"),"createdAt"),l=G().uid,u=function(e){return function(){return s.current.scrollIntoView({behavior:e})}};Object(n.useEffect)((function(){return u("auto")()}),[i]);var j="".concat(d.a.chatroom," ").concat(r&&!c?d.a.hiden:"");return Object(b.jsxs)("div",{className:j,children:[Object(b.jsx)(k,{chatName:t.name,showSidebar:a,isMobile:r}),t.id?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(g,{messages:i,uid:l}),Object(b.jsx)(H,{scroll:u("smooth")}),Object(b.jsx)("div",{ref:s}),Object(b.jsx)("div",{}),Object(b.jsx)(P,{send:function(e){!function(e,t){var a=G(),n=a.displayName,c=a.photoURL,r=a.uid;K.collection("chats/".concat(t,"/messages")).add({userName:n,text:e,createdAt:o.a.firestore.FieldValue.serverTimestamp(),uid:r,photoURL:c||""})}(e,t.id)}})]}):Object(b.jsx)("div",{className:d.a.selectchat,children:"Select a chat to start messaging"}),Object(b.jsx)("div",{ref:s})]})},X=a(31),$=a(55),ee=a.n($),te=function(e){var t=e.search,a=Object(n.useState)(null),c=Object(i.a)(a,2),r=c[0],s=c[1],o=Object(n.useState)(""),l=Object(i.a)(o,2),u=l[0],d=l[1];return Object(b.jsx)("form",{children:Object(b.jsx)("input",{type:"text",placeholder:"search",className:ee.a.input,value:u,onChange:function(e){e.preventDefault(),r&&clearTimeout(r),d(e.target.value),s(setTimeout((function(){return t(e.target.value)}),500))}})})},ae=a(51),ne=a.n(ae),ce=function(e){var t=e.name,a=e.isCurrentChat,n=e.setCurrentChat,c="".concat(ne.a.chat," ").concat(a?ne.a.active:"");return Object(b.jsx)("div",{className:c,onClick:function(){a||n()},children:Object(b.jsx)("div",{children:t})})},re=a(47),se=a.n(re),ie=a(32),oe=a.n(ie),le=function(e){return Object(b.jsxs)("div",Object(N.a)(Object(N.a)({className:oe.a.burger},e),{},{children:[Object(b.jsx)("div",{className:oe.a.line}),Object(b.jsx)("div",{className:"".concat(oe.a.line," ").concat(oe.a.second)}),Object(b.jsx)("div",{className:"".concat(oe.a.line," ").concat(oe.a.third)})]}))},ue=function(e){var t=e.currentChat,a=e.setCurrentChat,c=e.onProfile,r=e.hideSidebar,s=Z("chats","name"),o=Object(n.useState)(""),l=Object(i.a)(o,2),u=l[0],d=l[1];return Object(b.jsx)("div",{className:se.a.list,children:Object(b.jsxs)("div",{className:se.a.wrapper,children:[Object(b.jsxs)("div",{className:se.a.container,children:[Object(b.jsx)(le,{onClick:c}),Object(b.jsx)(te,{search:function(e){d(e.toUpperCase())}})]}),s&&s.filter((function(e){return~e.name.toUpperCase().indexOf(u)})).map((function(e){return Object(b.jsx)(ce,{isCurrentChat:t.id===e.id,setCurrentChat:(n=e.name,c=e.id,function(){r(),a({name:n,id:c})}),name:e.name},e.key);var n,c}))]})})},de=a(24),je=a.n(de),he=function(e,t){var a=Object(n.useState)(!0),c=Object(i.a)(a,2),r=c[0],s=c[1],o=Object(n.useState)(!1),l=Object(i.a)(o,2),u=l[0],d=l[1],j=Object(n.useState)(!1),h=Object(i.a)(j,2),b=h[0],m=h[1],O=Object(n.useState)(!1),p=Object(i.a)(O,2),_=p[0],x=p[1],f=Object(n.useState)(!1),v=Object(i.a)(f,2),g=v[0],N=v[1],C=Object(n.useState)(""),w=Object(i.a)(C,2),S=w[0],y=w[1];return Object(n.useEffect)((function(){for(var a in t)switch(a){case"isEmpty":s(!e);break;case"minLength":d(e.length<t[a]);break;case"maxLength":m(e.length>t[a]);break;case"email":x(!/\S+@\S+\.\S+/.test(e))}}),[e,t]),Object(n.useEffect)((function(){r||u||b||_?(u&&y("The field is too short"),_&&y("Email is invalid"),r&&y("input is empty"),N(!1)):(y(""),N(!0))}),[r,u,b,_]),{isEmpty:r,minLengthError:u,maxLengthError:b,emailError:_,errorMessage:S,inputValid:g}},be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,a=Object(n.useState)(e),c=Object(i.a)(a,2),r=c[0],s=c[1],o=Object(n.useState)(!1),l=Object(i.a)(o,2),u=l[0],d=l[1],j=he(r,t),h=function(e){s(e.target.value)},b=function(e){d(!0)};return Object(N.a)(Object(N.a)({value:r},j),{},{onChange:h,onBlur:b,isDirty:u})},me=function(e){var t=e.onChatList,a=G(),n=Object(X.useState)(!1),c=Object(i.a)(n,2),r=c[0],s=c[1],o=be("",{isEmpty:!1,minLength:3,maxLength:20}),l=o.inputValid;return Object(b.jsx)("div",{className:je.a.profile,children:Object(b.jsxs)("div",{children:[Object(b.jsx)(S,{onClick:t}),Object(b.jsxs)("div",{className:je.a.container,children:[Object(b.jsx)("img",{src:a.photoURL,className:je.a.avatar,alt:""}),Object(b.jsxs)("div",{className:je.a.info,children:[Object(b.jsx)("div",{className:je.a.name,children:a.displayName}),Object(b.jsxs)("div",{className:je.a.email,children:[" ",a.email]})]})]}),Object(b.jsxs)("div",{className:je.a.wrapper,children:[r?Object(b.jsxs)("form",{className:je.a.form__wrapper,children:[Object(b.jsx)("input",{type:"text",placeholder:"Enter a chat name",className:"input",onChange:o.onChange,value:o.value}),Object(b.jsx)("button",{className:"button ".concat(je.a.newchat),onClick:function(e){e.preventDefault(),function(e){K.collection("chats").add({name:e,createdBy:G().uid})}(o.value),s(!1),t()},disabled:!l,children:" Save"})]}):Object(b.jsx)("button",{className:"button ".concat(je.a.newchat),onClick:function(){s(!0)},children:"+New Chat"}),Object(b.jsx)("button",{className:"button ".concat(je.a.signout),onClick:W,children:"Sign out"})]})]})})},Oe=a(37),pe=a.n(Oe),_e=function(e){var t=e.currentChat,a=e.setCurrentChat,n=e.isSidebarHiden,c=e.hideSidebar,r=Object(X.useState)(!1),s=Object(i.a)(r,2),o=s[0],l=s[1],u=Object(X.useContext)(J),d="".concat(pe.a.sidebar," ").concat(u?pe.a.mobile:""," ").concat(n?pe.a.hiden:"");return Object(b.jsx)("div",{className:d,children:Object(b.jsx)("div",{className:pe.a.wrapper,children:o?Object(b.jsx)(me,{onChatList:function(){return l(!1)},setCurrentChat:a}):Object(b.jsx)(ue,{onProfile:function(){return l(!0)},hideSidebar:c,setCurrentChat:a,currentChat:t})})})},xe=function(){var e=Object(n.useState)({}),t=Object(i.a)(e,2),a=t[0],c=t[1],r=Object(X.useContext)(J),s=Object(n.useState)(!1),o=Object(i.a)(s,2),l=o[0],u=o[1];return Object(b.jsxs)("div",{style:{display:"flex"},children:[Object(b.jsx)(_e,{setCurrentChat:c,currentChat:a,isSidebarHiden:l,hideSidebar:function(){r&&u(!0)}}),Object(b.jsx)(Q,{currentChat:a,isSidebarHiden:l,showSidebar:function(){r&&u(!1)}})]})},fe=a(16),ve=a.n(fe),ge=function(e){var t=e.signIn,a=Object(n.useState)(""),c=Object(i.a)(a,2),r=c[0],s=c[1],o=be("",{isEmpty:!1,minLength:3}),l=be("",{isEmpty:!1,email:!1}),u=be("",{isEmpty:!1,minLength:6}),d=be("",{isEmpty:!1,minLength:6}),j=u.value!==d.value,h=o.inputValid&&l.inputValid&&u.inputValid&&d.inputValid&&!j,m=function(){var e=Object(R.a)(V.a.mark((function e(t){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),Y(l.value,u.value,o.value).catch((function(e){s(e.message)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsxs)("div",{className:ve.a.auth,children:[Object(b.jsx)("div",{className:ve.a.title,children:Object(b.jsx)("h1",{children:"Create account"})}),Object(b.jsxs)("div",{className:ve.a.card,children:[Object(b.jsxs)("form",{className:ve.a.form,children:[Object(b.jsx)("div",{children:"Username"}),Object(b.jsx)("input",{type:"text",className:ve.a.input,onChange:o.onChange,onBlur:o.onBlur,value:o.value}),Object(b.jsx)("div",{className:ve.a.error,children:o.isDirty&&o.errorMessage}),Object(b.jsx)("div",{children:"Email address"}),Object(b.jsx)("input",{type:"email",name:"email",onChange:l.onChange,className:ve.a.input,onBlur:l.onBlur,value:l.value}),Object(b.jsx)("div",{className:ve.a.error,children:l.isDirty&&l.errorMessage}),Object(b.jsx)("div",{children:"Password"}),Object(b.jsx)("input",{type:"password",autoComplete:"off",className:ve.a.input,onChange:u.onChange,onBlur:u.onBlur,value:u.value}),Object(b.jsx)("div",{className:ve.a.error,children:u.isDirty&&u.errorMessage}),Object(b.jsx)("div",{children:"Confirm password"}),Object(b.jsx)("input",{type:"password",autoComplete:"off",className:ve.a.input,onChange:d.onChange,onBlur:d.onBlur,value:d.value}),Object(b.jsx)("div",{className:ve.a.error,children:d.isDirty&&j&&"Password mismatch"}),Object(b.jsxs)("div",{className:ve.a.caption,children:["Already registered ",Object(b.jsx)("span",{className:ve.a.link,onClick:t,children:"Sign in"})]}),Object(b.jsx)("button",{className:"button",disabled:!h,onClick:m,children:"Create account"}),Object(b.jsx)("div",{className:ve.a.error,children:r})]}),Object(b.jsx)("button",{className:"button",onClick:z,children:"Continue with Google"})]})]})},Ne=function(e){var t=e.createAccount,a=be("",{isEmpty:!1,email:!1}),c=be("",{isEmpty:!1,minLength:6}),r=Object(n.useState)(""),s=Object(i.a)(r,2),o=s[0],l=s[1],u=a.inputValid&&c.inputValid;return Object(b.jsxs)("div",{className:ve.a.auth,children:[Object(b.jsx)("div",{className:ve.a.title,children:Object(b.jsx)("h1",{children:"Sign In"})}),Object(b.jsxs)("div",{className:ve.a.card,children:[Object(b.jsxs)("form",{className:ve.a.form,children:[Object(b.jsx)("div",{children:"Email address"}),Object(b.jsx)("input",{name:"email",onChange:a.onChange,className:ve.a.input,onBlur:a.onBlur,value:a.value}),Object(b.jsx)("div",{className:ve.a.error,children:a.isDirty&&a.errorMessage}),Object(b.jsx)("div",{children:"Password"}),Object(b.jsx)("input",{type:"password",autoComplete:"on",className:ve.a.input,onChange:c.onChange,onBlur:c.onBlur,value:c.value}),Object(b.jsx)("div",{className:ve.a.error,children:c.isDirty&&c.errorMessage}),Object(b.jsx)("div",{className:ve.a.caption,children:Object(b.jsx)("span",{className:ve.a.link,onClick:t,children:"Create Account"})}),Object(b.jsx)("button",{className:"button",disabled:!u,onClick:function(e){e.preventDefault(),T(a.value,c.value).catch((function(e){l(e.message)}))},children:"Sign in"}),Object(b.jsx)("div",{className:ve.a.error,children:o})]}),Object(b.jsx)("button",{className:"button",onClick:z,children:"Continue with Google"})]})]})},Ce=function(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),a=t[0],c=t[1];return Object(b.jsx)(b.Fragment,{children:a?Object(b.jsx)(Ne,{createAccount:function(){return c(!1)}}):Object(b.jsx)(ge,{signIn:function(){return c(!0)}})})},we=function(){var e=o.a.auth(),t=Object(l.a)(e),a=Object(i.a)(t,1)[0],c=Object(n.useState)(window.innerWidth),r=Object(i.a)(c,2),s=r[0],u=r[1],d=s<766,j=function(){return u(window.innerWidth)};return Object(n.useEffect)((function(){return window.addEventListener("resize",j),function(){window.removeEventListener("resize",j)}}),[]),Object(b.jsx)("div",{className:"App",children:Object(b.jsx)(J.Provider,{value:d,children:a?Object(b.jsx)(xe,{}):Object(b.jsx)(Ce,{})})})};s.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(we,{})}),document.getElementById("root"))}},[[67,1,2]]]);
//# sourceMappingURL=main.a0957eb0.chunk.js.map